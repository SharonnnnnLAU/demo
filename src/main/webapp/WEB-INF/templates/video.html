<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="..//layui/css/layui.css">
</head>
<body>
<!-- 解析数据的表格 -->
<table class="layui-hide" id="video" lay-filter="videotest"></table>

<!-- 自定义的行工具栏 -->
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>

<script type="text/javascript" src="../layui/layui.js"></script>
<script type="text/javascript">
    function clickToPaly(path) {
        console.log(path)
        var s = '<video src="../' +path+ '" width="100%", height="100%", controls="controls"> </video>'
        layui.use(['layer'], function () {
            var layer = layui.layer
            layer.open({
                type: 1,
                title: "预览",
                area: ['57%', '60%'],
                content: s
            })
        })
    }

    layui.use(['table'], function () {
        var table = layui.table
        // 执行一个table实例
        table.render({
            elem: '#video'
            , height: 600
            , url: 'http://localhost:8080/demo/videos/getAllVideos' //数据接口
            , title: '视频表'
            , page: true //开启分页
            , toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
            , cols: [
                [ //表头
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'id', title: 'ID', sort: true, fixed: 'left'}
                    , {field: 'userId', title: '发布者'}
                    , {field: 'videoDesc', title: '视频描述'}
                    , {field: 'videoPath', title: '播放'
                        ,templet: function (d) {
                        var path = d.videoPath;
                        return "<button class='layui-btn layui-btn-radius layui-btn-warm layui-btn-sm' onclick='clickToPaly(\""+path+"\")'>点击播放</button>";
                        }
                    }
                    , {field: 'videoSeconds', title: '时长', sort: true}
                    , {field: 'coverPath', title: '封面图',
                        templet: function (d) {
                            var path = d.coverPath;
                            return "<img src=../" + path + " style='height: 28px, width=100% ' />"
                        }
                    }
                    , {field: 'likeCounts', title: '点赞次数'}
                    , {field: 'status', title: '状态'}
                    , {field: 'createTime', title: '创建时间', width: 135, sort: true, totalRow: true}
                    , {field: '', fixed: 'right', title: '', width: 165, align: 'center', toolbar: '#barDemo'}
                ]
            ]
        });
    });
</script>
</body>
</html>
